import {useEffect, useState} from 'react';
import axios from 'axios';
const FileUpload = () => {
    const [file,setFile] = useState(null);
  const upLoad = () => {
    document.getElementById('file').click();
  };
  const handleUpload = () => {
    const formData = new FormData();
    formData.append('file',file);
    axios.post('http://localhost:5000/upload',formData).then(res => {
      console.log(res);
    }).catch(err => {
      console.log(err);
    });
  }
  const handleDragOver = (e) => {
    e.preventDefault();
  }
  const handleDrop= (e)=> {
    e.preventDefault();
    if(e.dataTransfer.files){
        setFile(e.dataTransfer.files[0]);
        handleUpload();
    }
  }
  
    return (
        <div onDragOver={handleDragOver} onDrop={handleDrop} className='mx-8 mb-5 mt-12 flex flex-col justify-center px-10 py-8 bg-[#EFEFEF] border-dashed border-4 border-black rounded-[32px]'>
              <div className='flex justify-center'><img className=' w-24 ' src="./src/assets/upload-file.svg" alt="Upload File" /></div>
              <div className='flex justify-center mt-8'><span className='text-[#6D6666]'>Drag and drop files here</span></div>
              <div className='flex justify-center mt-3'><span className='text-[#6D6666]'>~OR~</span></div>
              <div className='flex justify-center mt-3'><button className='px-5 pb-2 pt-1 rounded-full text-[#EFEFEF] font-bold bg-[#4A7AF6]' onClick={upLoad}>Browse</button></div>
              <input type="file" name="file" onChange={(e)=>{setFile(e.target.files[0]);handleUpload();}} id="file" className='hidden' />
        </div>
    );
};

export default FileUpload;